# Panel Counterfactual Estimators for Policy Shocks under Latent Trends

**Causal ML Final Project**

Submitted by: Giorgio Coppola  

## Writeup

ğŸ“ <strong>Read the writeup</strong>
<a href="writeup/writeup.pdf" target="_blank" rel="noopener">in PDF</a>
or
<a href="writeup/writeup.html" target="_blank" rel="noopener">in HTML</a>


## Overview

Simulation comparing panel causal estimators under latent factor trends (violations of parallel trends). 

**Research question:** How do Two-Ways Fixed Effect (TWFE), Matrix Completion (MC), and Synthetic Difference in Difference (SynthDiD) compare in bias, coverage, and power when outcomes are sparse/binary and units follow latent interactive trends correlated with treatment assignment?

**Application context:** Italyâ€“Libya MoU's effect on migrant mortality in the Central Mediterranean (May 2017 operational onset). The DGP is calibrated to match real IOM data patterns, but the goal is methodological.

**Setup:** 56 grid cells Ã— 35 months, binary outcome (any deaths in cell-month), treatment = proximity to Libya Ã— post-May 2017.

## Reproduce Results  

To reproduce the analysis, run the following commands in R:
```r
source("R/00_setup.R")
source("R/run_analysis.R")
```

To render the writeup (from the project root):
```bash
quarto render writeup/writeup.qmd --to pdf
quarto render writeup/writeup.qmd --to html
```

## Repository structure

```
â”œâ”€â”€ R/
â”‚   â”œâ”€â”€ 00_setup.R         # Prepare environment
â”‚   â”œâ”€â”€ 01_dgp.R           # Data generating process
â”‚   â”œâ”€â”€ 02_calibration.R   # Calibration from IOM data
â”‚   â”œâ”€â”€ 03_estimators.R    # TWFE, MC, SDID
â”‚   â”œâ”€â”€ 04_simulation.R    # Power and scenario analysis
â”‚   â””â”€â”€ run_analysis.R     # Main script
â”œâ”€â”€ data/
â”‚   â””â”€â”€ calibration_targets.rds 
â”œâ”€â”€ figures/               # Output plots
â”œâ”€â”€ output/                # Summary tables
â””â”€â”€ writeup/
    â””â”€â”€ writeup.qmd        # Writeup in various formats
```

## Data

Analysis uses a pre-computed calibrated synthetic dataset (`data/calibration_targets.rds`) derived from [IOM Missing Migrants Project](https://missingmigrants.iom.int/) data. These contain summary statistics only (event rates, seasonality indices), with no reference to the original IOM incident data, which is not fully open source. The data is generated by running the following commands:

```r
source("R/01_dgp.R")
source("R/02_calibration.R")
calibrate_from_iom()
```
These commands cannot be reproduced without access to the original data. Nevertheless, the analysis is fully reproducible without access to the original dataset.

## Dependencies

`tidyverse`, `fixest`, `Matrix`, `synthdid`, `patchwork`, `scales`, `furrr`, `progressr`

Install all dependencies running `source("R/00_setup.R")`.
